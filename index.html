<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Day Planner</title>

    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css" integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh" crossorigin="anonymous">

    <link rel="stylesheet" href="style.css">

    <script
  src="https://code.jquery.com/jquery-3.4.1.min.js"
  integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo="
  crossorigin="anonymous"></script>

  <script src="node_modules/moment/moment.js"></script>
    
</head>
<body>
    <div class="container-fluid">
        <div class="row mb-3 pb-3">
            <div class="col-12 text-center border-bottom">
                <h1>Work Day Scheduler</h1>
                <p>Plan out your day by entering in your tasks below.</p>
                <h3>(Insert Current Date Here)</h3>
            </div>
        </div>
    </div>
    <div class="container">
        <div class="row mt-1" data-state="past">
            <div class="col-2 dayplanner-time text-right border-top border-bottom">
                9AM
            </div>
            <div class="col-8 px-0 border dayplanner-textarea">
                <textarea id="nineAM"></textarea>
                
            </div>
            <div class="col-2 pl-0 dayplanner-save">
                <button class="btn btn-block btn-info rounded-right">Save</button>
            </div>
        </div>
        <div class="row mt-1" data-state="present">
            <div class="col-2 dayplanner-time text-right border-top border-bottom">
                10AM
            </div>
            <div class="col-8 px-0 border dayplanner-textarea">
                <textarea id="tenAM"></textarea>
            </div>
            <div class="col-2 pl-0 dayplanner-save">
                <button class="btn btn-block btn-info rounded-right">Save</button>
            </div>
        </div>
        <div class="row mt-1" data-state="future">
            <div class="col-2 dayplanner-time text-right border-top border-bottom">
                11AM
            </div>
            <div class="col-8 px-0 border dayplanner-textarea">
                <textarea id="elevenAM"></textarea>
            </div>
            <div class="col-2 pl-0 dayplanner-save">
                <button class="btn btn-block btn-info rounded-right">Save</button>
            </div>
        </div>
        <div class="row mt-1" data-state="future">
            <div class="col-2 dayplanner-time text-right border-top border-bottom">
                12PM
            </div>
            <div class="col-8 px-0 border dayplanner-textarea">
                <textarea id="twelvePM"></textarea>
            </div>
            <div class="col-2 pl-0 dayplanner-save">
                <button class="btn btn-block btn-info rounded-right">Save</button>
            </div>
        </div>
        <div class="row mt-1" data-state="future">
            <div class="col-2 dayplanner-time text-right border-top border-bottom">
                1PM
            </div>
            <div class="col-8 px-0 border dayplanner-textarea">
                <textarea id="onePM"></textarea>
            </div>
            <div class="col-2 pl-0 dayplanner-save">
                <button class="btn btn-block btn-info rounded-right">Save</button>
            </div>
        </div>
        <div class="row mt-1" data-state="future">
            <div class="col-2 dayplanner-time text-right border-top border-bottom">
                2PM
            </div>
            <div class="col-8 px-0 border dayplanner-textarea">
                <textarea id="twoPM"></textarea>
            </div>
            <div class="col-2 pl-0 dayplanner-save">
                <button class="btn btn-block btn-info rounded-right">Save</button>
            </div>
        </div>
        <div class="row mt-1" data-state="future">
            <div class="col-2 dayplanner-time text-right border-top border-bottom">
                3PM
            </div>
            <div class="col-8 px-0 border dayplanner-textarea">
                <textarea id="threePM"></textarea>
            </div>
            <div class="col-2 pl-0 dayplanner-save">
                <button class="btn btn-block btn-info rounded-right">Save</button>
            </div>
        </div>
        <div class="row mt-1" data-state="future">
            <div class="col-2 dayplanner-time text-right border-top border-bottom">
                4PM
            </div>
            <div class="col-8 px-0 border dayplanner-textarea">
                <textarea id="fourPM"></textarea>
            </div>
            <div class="col-2 pl-0 dayplanner-save">
                <button class="btn btn-block btn-info rounded-right">Save</button>
            </div>
        </div>
        <div class="row mt-1" data-state="future">
            <div class="col-2 dayplanner-time text-right border-top border-bottom">
                5PM
            </div>
            <div class="col-8 px-0 border dayplanner-textarea">
                <textarea id="fivePM"></textarea>
            </div>
            <div class="col-2 pl-0 dayplanner-save">
                <button class="btn btn-block btn-info rounded-right">Save</button>
            </div>
        </div>
    </div>
    <script>
        // Initialize moment.js
        moment().format();

        // Set up an object to correspond the user's tasks to
        // the hours within a day
        var dayPlannerTasks = {
            nineAM: " ",
            tenAM: " ",
            elevenAM: " ",
            twelvePM: " ",
            onePM: " ",
            twoPM: " ",
            threePM: " ",
            fourPM: " ",
            fivePM: " "
        }

        renderTasks();

        // If user enters a value in a certain hour's textarea,
        // then store their entry into the dayPlannerTasks array
        $(document).ready(function() {
            $("textarea").on("focus", function(event){
                // console.log(event.target.id);
                $(event.target).on("keyup", function(){
                    // console.log(event.target.value); 
                    dayPlannerTasks[event.target.id] = event.target.value;
                    // console.log(dayPlannerTasks);
                    // // Store the user's entry in their local storage
                    // localStorage.setItem("tasks", JSON.stringify(dayPlannerTasks));
                });
            });
            $(".btn-info").on("click", function(event){
                // Put the value in the corresponding text area into the relevant
                // key name in the array
                // console.log();

                // Store the user's entry in their local storage
                localStorage.setItem("tasks", JSON.stringify(dayPlannerTasks))
            });
        });

        // Grab existing tasks that a user set in previous session and 
        // display in textareas

        function renderTasks() {
            if (localStorage.getItem("tasks")) {
                dayPlannerTasks = JSON.parse(localStorage.getItem("tasks"));
                // console.log(Object.keys(dayPlannerTasks).length);
                var textAreas = $('.dayplanner-textarea textarea');
                // console.log(textAreas);
                for (var i=0;i < textAreas.length;i++) {
                    // console.log(textAreas[i].id);
                    textAreas[i].value = dayPlannerTasks[textAreas[i].id];
                }
            }
        }

        // See what the user's current time is
        // and change the colors of the text areas depending
        // on if it's in the past, present, or future
    </script>
</body>
</html>